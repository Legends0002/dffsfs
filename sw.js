(()=>{"use strict";const t=new URLSearchParams(location.search).get("bundle"),s="yandex-game-cache-",a=s+"9744575",e="/games/",i=[e,"https://games-storage.yandex.net/helper/%HELPER_VERSION%/index.html".replace("%HELPER_VERSION%","38"),"https://games.s3.yandex.net/helper/%HELPER_VERSION%/index.html".replace("%HELPER_VERSION%","38")];Array.prototype.push.apply(i,{desktop:["//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.index.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.index.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.mount.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.skeleton.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.skeleton.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.welcome-bonus.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.welcome-bonus.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.welcome-bonus-animation.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.welcome-bonus-animation.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.desktop.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.desktop.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.no-ads-popup.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.no-ads-popup.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.balance-popup.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.balance-popup.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.balance-refill.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.balance-refill.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.game-redirect.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.game-redirect.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.reload-helper.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.ux-feedback-frame.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.ux-feedback-frame.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.onboarding.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.onboarding.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.purchase-dialog.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.purchase-dialog.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/desktop.0.build.js"],mobile:["//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.index.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.index.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.mount.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.skeleton.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.skeleton.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.welcome-bonus.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.welcome-bonus.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.welcome-bonus-animation.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.welcome-bonus-animation.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.mobile.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.mobile.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.balance-popup.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.balance-popup.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.balance-refill.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.balance-refill.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.no-ads-popup.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.no-ads-popup.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.game-redirect.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.game-redirect.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.net-domain-helper-container.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.reload-helper.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.manifest-installer.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.ux-feedback-frame.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.ux-feedback-frame.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.onboarding.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.onboarding.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.purchase-dialog.build.css","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.purchase-dialog.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.0.build.js","//yastatic.net/s3/games-static/stardust/games/v9744575/build/mobile.1.build.js"]}[t||"mobile"]);const c=["iframe","counting-time-machine","sdk","manifest"],n=/(?:\/[a-z]{2})?/,d=["//avatars.mds.yandex.net/get-games/","//yastatic.net/islands/","//yastatic.net/q/logoaas/v2/","//yastatic.net/react/","//yastatic.net/s3/frontend/butterfly/","//yastatic.net/s3/frontend/yandex-font/","//yastatic.net/s3/games-static/","//yastatic.net/s3/home/fonts/"],o=["https://avatars.mds.yandex.net"].map((t=>"".concat(t,"/get-games/"))),l=[new RegExp("".concat(location.origin,"/games").concat(n,"$")),new RegExp("".concat(location.origin,"/games/manifest/catalogue/")),new RegExp("".concat(location.origin,"/games/manifest/play/")),new RegExp("".concat(location.origin,"/games/manifest/sdk/")),new RegExp("".concat(location.origin,"/games/play/")),new RegExp("".concat(location.origin,"/games/sdk/")),new RegExp("".concat(location.origin,"/games").concat(n,"/category/")),new RegExp("".concat(location.origin,"/games").concat(n,"/tag/")),new RegExp("".concat(location.origin,"/games").concat(n,"/preview/")),new RegExp("".concat(location.origin,"/games").concat(n,"/install")),new RegExp("".concat(location.origin,"/games").concat(n,"/promos")),new RegExp("".concat(location.origin,"/games").concat(n,"/user"))],u=self;["YandexSearch/","YaBrowser/","BroPP/","Firefox/"].some((t=>-1!==navigator.userAgent.indexOf(t)))&&u.addEventListener("install",(function(t){console.info("[sw] Cache default resources"),t.waitUntil(caches.open(a).then((t=>t.addAll(i).catch((t=>t)))))})),u.addEventListener("activate",(function(t){t.waitUntil(caches.keys().then((t=>{const e=t.map((t=>{if(0===t.indexOf(s)&&t!==a)return caches.delete(t)})).filter(Boolean);return Promise.all(e)})))})),u.addEventListener("fetch",(function(t){let{request:s}=t;const{method:i,url:n}=s;if("GET"!==i||0!==n.indexOf("https://")||/\.mp4$/.test(n))return;if("only-if-cached"===s.cache&&"same-origin"!==s.mode)return;if(!function(t){return!!d.some((s=>-1!==t.indexOf(s)))||!!l.some((s=>s.test(t)))}(n))return;if(t.request.headers.has("range"))return;"no-cors"===s.mode&&[".png",".jpg",".jpeg",".webp",".svg",".ico"].some((t=>n.endsWith(t)))&&(s=new Request(s,{mode:"cors",credentials:"omit"}));const u=function(t){const s=function(t){const s=t.match(/^https?:\/\/(?:.*\.)*yandex\.(?:ru|by|kz|ua|uz|com|com\.tr|az|co\.il|com\.am|com\.ge|ee|fi|fr|lt|lv|md|pl|tj|tm)\/games\/play\/([a-z0-9_-]+)/i);return s&&"/games/play/".concat(s[1])}(t.url);if(s)return new Request(s);if("navigate"===t.mode){const s=function(t){const s=t.match(/^https?:\/\/(?:.*\.)*yandex\.(?:ru|by|kz|ua|uz|com|com\.tr|az|co\.il|com\.am|com\.ge|ee|fi|fr|lt|lv|md|pl|tj|tm)\/games\/([a-z0-9_-]+)/i);return s&&s[1]}(t.url);if(-1===c.indexOf(s))return new Request(e)}return t}(s),m=caches.match(u);!function(t){return o.some((s=>-1!==t.indexOf(s)))}(n)?t.respondWith(new Promise(((t,e)=>{const i=setTimeout((()=>{m.then((s=>{s&&t(s)}))}),3e3);fetch(s).then((s=>(clearTimeout(i),s.status>=500&&s.status<=599?t(m):s.status>=300&&s.status<=499?t(s):(caches.open(a).then((t=>{t.put(u,s)})),void t(s.clone()))))).catch((s=>m.then((a=>{a?t(a):e(s)}))))}))):t.respondWith(new Promise(((t,e)=>{m.then((i=>{i&&"opaque"!==i.type?t(i):fetch(s).then((s=>s.status>=500&&s.status<=599?e(new Error("SW: Server error on fetch")):s.status>=300&&s.status<=499||"opaque"===s.type?t(s):(caches.open(a).then((t=>{t.put(u,s)})),void t(s.clone())))).catch((t=>{e(t)}))}))})))})),u.addEventListener("activate",(t=>{t.waitUntil(u.clients.claim()),u.clients.matchAll({includeUncontrolled:!1,type:"window"}).then(((t=[])=>{t.forEach((t=>{t.postMessage({type:"ServiceWorkerVersionMessage",version:"9744575"})}))}))})),u.addEventListener("install",(function(t){t.waitUntil(u.skipWaiting())}))})();
//# sourceMappingURL=sw.js.map